<source>
  type tail
  path /var/lib/docker/containers/*/*-json.log
  pos_file /var/lib/docker/containers/containers.log.pos
	time_format %Y-%m-%dT%H:%M:%S
  tag docker.log.*
	format json
</source>

<match docker.log.**>
  type docker_tag_resolver
</match>

<match docker.container.**>
  type record_reformer
	tag processed.${tag}
	
  <record>
    host "#{ENV['HOST']}"
		id ${hostname}
    image ${tag_parts[2]}
		name ${tag_parts[-2]}
  </record>
</match>

<match processed.docker.container.**>
  type stdout
	format json
</match>
